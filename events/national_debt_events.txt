namespace = national_debt

national_debt.1 = { 
	type = country_event
	hidden = yes
	immediate = {
		add_treasury = {
			value = national_debt_value
		}
		add_modifier = {
			name = country_treasury_interest_modifers
			multiplier = national_debt_interest
			years = 10
		}
		add_modifier = {
			name = country_national_debt_modifers
			multiplier = national_debt_value
			days = 3650
		}
		if = {
			limit = {
				has_variable = national_debt_var
			}
			change_variable = {
				name = national_debt_var
				add = national_debt_value
			}
		}
		else = {
			set_variable = {
				name = national_debt_var
				value = national_debt_value
			}
		}
		#偿还到期本金
		trigger_event = {
			id = national_debt.3
			days = 3657
		}
		if = {
			limit = { has_variable = national_inflation }
			change_variable = { 
				name = national_inflation 
				add = -0.05
			}
			clamp_variable = { name = national_inflation max = 100 min = 0 }
			remove_modifier = national_inflation_modifers
			add_modifier = {
				name = national_inflation_modifers
				multiplier = var:national_inflation
			}
		}		
		every_scope_state = {
			remove_modifier = country_national_debt_rich_pop
			add_modifier = {
				name = country_national_debt_rich_pop
				multiplier = rich_pop_wealth_modifier
				years = 10
			}
			remove_modifier = country_national_debt_middle_pop
			add_modifier = {
				name = country_national_debt_middle_pop
				multiplier = middle_pop_wealth_modifier
				years = 10
			}
			remove_modifier = country_national_debt_poor_pop
			add_modifier = {
				name = country_national_debt_poor_pop
				multiplier = poor_pop_wealth_modifier
				years = 10
			}
		}
	}
}
##偿还所有本金
national_debt.2 = { 
	type = country_event
	hidden = yes
	immediate = {
		add_treasury = {
			value = {
				add = -1
				multiply = modifier:country_national_debt_add
			}
		}
		#清空
		set_variable = {
			name = national_debt_var
			value = 0
		}
		remove_modifier = country_national_debt_modifers
	}
}
##偿还逾期本金
national_debt.3 = { 
	type = country_event
	hidden = yes
	immediate = {
		add_treasury = {
			value = {
				add = -1
				multiply = overdue_national_debts
			}
		}
		change_variable = {
			name = national_debt_var
			subtract = overdue_national_debts
		}
	}
}